# PSX Config Template for Node.js Projects
version: 1

project_type: "nodejs"

rules:
  general:
    readme_required: error
    license_required: warning
    gitignore_required: error      # gitignore is critical for node
    changelog_required: false
    
  structure:
    src_folder_required: warning    # src/ or lib/ recommended
    tests_folder_required: error    # tests are important
    docs_folder_required: false
    
  documentation:
    api_docs_required: warning      # especially for packages
    contributing_guide: false
    
  cicd:
    github_actions: info           # recommended for open source
    
  quality:
    pre_commit_hooks: info
    editorconfig: info
    eslint_config: warning         # should have linting
    prettier_config: info          # code formatting
    
  # Node.js specific rules
  nodejs:
    package_json_valid: error           # must be valid JSON
    package_json_required_fields: error # name, version, etc
    lock_file_present: warning          # package-lock.json or yarn.lock
    node_modules_ignored: error         # must be in .gitignore
    scripts_defined: warning            # should have npm scripts (test, build, etc)
    dependencies_reasonable: info       # warn if too many deps

ignore:
  - node_modules/
  - dist/
  - build/
  - coverage/
  - .next/
  - .nuxt/
  - .cache/
  - "*.log"

templates:
  readme:
    sections:
      - title
      - badges             # npm version, build status, etc
      - description
      - installation
      - usage
      - api              # if it's a library
      - examples
      - contributing
      - license
      
  gitignore:
    patterns:
      - node_modules/
      - .env
      - .env.local
      - dist/
      - build/
      - coverage/
      - "*.log"
      - .DS_Store

fix:
  interactive: true
  # when fixing package.json, ensure these scripts exist
  required_scripts:
    - test
    - build
    - lint