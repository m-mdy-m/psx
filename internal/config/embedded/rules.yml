# PSX Rules Metadata

rules:
  # ============================================
  # General Rules
  # ============================================
  readme:
    id: "README_REQUIRED"
    category: general
    description: "Every project should have a README file"
    severity: error
    patterns:
      - README.md
      - README
      - readme.md
    message: "README.md file not found in project root"
    fix_hint: "psx fix --rule readme"
    doc_url: ""

  license:
    id: "LICENSE_REQUIRED"
    category: general
    description: "Projects should have a clear license"
    severity: warning
    patterns:
      - LICENSE
      - LICENSE.md
      - LICENSE.txt
      - COPYING
    additional_checks:
      - package.json:license
      - Cargo.toml:license
    message: "No LICENSE file found"
    fix_hint: "psx fix --rule license"
    doc_url: "https://choosealicense.com"

  gitignore:
    id: "GITIGNORE_REQUIRED"
    category: general
    description: "Exclude unnecessary files from version control"
    severity: warning
    patterns:
      - .gitignore
    message: "No .gitignore file found"
    fix_hint: "psx fix --rule gitignore"
    doc_url: "https://git-scm.com/docs/gitignore"

  changelog:
    id: "CHANGELOG_RECOMMENDED"
    category: general
    description: "Track notable changes in your project"
    severity: info
    patterns:
      - CHANGELOG.md
      - CHANGELOG
      - HISTORY.md
    message: "No CHANGELOG file found"
    fix_hint: "psx fix --rule changelog"
    doc_url: "https://keepachangelog.com"

  # ============================================
  # Package Manager Rules
  # ============================================
  package_manager:
    id: "PACKAGE_MANAGER_REQUIRED"
    category: general
    description: "Project should have package manager configuration"
    severity: error
    patterns:
      nodejs:
        - package.json
      go:
        - go.mod
    message: "No package manager configuration found"
    fix_hint: "Initialize your package manager (npm init, go mod init)"
    doc_url: ""

  # ============================================
  # Structure Rules
  # ============================================
  src_folder:
    id: "SRC_FOLDER_REQUIRED"
    category: structure
    description: "Organize source code in a dedicated folder"
    severity: warning
    patterns:
      nodejs:
        - src/
        - lib/
      go:
        - cmd/
        - internal/
        - pkg/
      generic:
        - src/
    message: "No source folder found"
    fix_hint: "psx fix --rule src_folder"
    doc_url: ""

  tests_folder:
    id: "TESTS_FOLDER_REQUIRED"
    category: structure
    description: "Every project needs tests"
    severity: error
    patterns:
      nodejs:
        - test/
        - tests/
        - __tests__/
        - "**/*.test.js"
        - "**/*.test.ts"
      go:
        - "**/*_test.go"
      generic:
        - tests/
        - test/
    message: "No tests found"
    fix_hint: "psx fix --rule tests_folder"
    doc_url: ""

  docs_folder:
    id: "DOCS_FOLDER_RECOMMENDED"
    category: structure
    description: "Dedicated folder for documentation"
    severity: info
    patterns:
      - docs/
      - documentation/
      - doc/
    message: "No docs/ folder found"
    fix_hint: "psx fix --rule docs_folder"
    doc_url: ""

  scripts_folder:
    id: "SCRIPTS_FOLDER_RECOMMENDED"
    category: structure
    description: "Utility scripts for development"
    severity: info
    patterns:
      - scripts/
      - script/
      - bin/
    message: "No scripts folder found"
    fix_hint: "psx fix --rule scripts_folder"
    doc_url: ""

  # ============================================
  # Documentation Rules
  # ============================================
  adr:
    id: "ADR_RECOMMENDED"
    category: documentation
    description: "Document important architecture decisions"
    severity: info
    patterns:
      - docs/adr/
      - docs/architecture/decisions/
      - adr/
    message: "No ADR folder found"
    fix_hint: "psx fix --rule adr"
    doc_url: "https://adr.github.io"

  contributing:
    id: "CONTRIBUTING_RECOMMENDED"
    category: documentation
    description: "Guide for contributors"
    severity: info
    patterns:
      - CONTRIBUTING.md
      - .github/CONTRIBUTING.md
      - docs/CONTRIBUTING.md
    message: "No CONTRIBUTING.md file found"
    fix_hint: "psx fix --rule contributing"
    doc_url: "https://docs.github.com/en/communities"

  api_docs:
    id: "API_DOCS_REQUIRED"
    category: documentation
    description: "Document your public API"
    severity: warning
    patterns:
      nodejs:
        - docs/api/
        - docs/API.md
      go:
        - docs/api/
        - docs/API.md
      generic:
        - docs/api/
        - docs/API.md
    message: "No API documentation found"
    fix_hint: "psx fix --rule api_docs"
    doc_url: ""

  security:
    id: "SECURITY_RECOMMENDED"
    category: documentation
    description: "Security policy and vulnerability reporting"
    severity: info
    patterns:
      - SECURITY.md
      - .github/SECURITY.md
      - docs/SECURITY.md
    message: "No SECURITY.md file found"
    fix_hint: "psx fix --rule security"
    doc_url: "https://docs.github.com/en/code-security"

  code_of_conduct:
    id: "CODE_OF_CONDUCT_RECOMMENDED"
    category: documentation
    description: "Community guidelines and conduct"
    severity: info
    patterns:
      - CODE_OF_CONDUCT.md
      - .github/CODE_OF_CONDUCT.md
    message: "No CODE_OF_CONDUCT.md file found"
    fix_hint: "psx fix --rule code_of_conduct"
    doc_url: "https://docs.github.com/en/communities"

  pull_request_template:
    id: "PULL_REQUEST_TEMPLATE_RECOMMENDED"
    category: documentation
    description: "Template for pull requests"
    severity: info
    patterns:
      - .github/PULL_REQUEST_TEMPLATE.md
      - .github/pull_request_template.md
      - docs/PULL_REQUEST_TEMPLATE.md
    message: "No pull request template found"
    fix_hint: "psx fix --rule pull_request_template"
    doc_url: "https://docs.github.com/en/communities"

  issue_templates:
    id: "ISSUE_TEMPLATES_RECOMMENDED"
    category: documentation
    description: "Templates for issues"
    severity: info
    patterns:
      - .github/ISSUE_TEMPLATE/
    message: "No issue templates found"
    fix_hint: "psx fix --rule issue_templates"
    doc_url: "https://docs.github.com/en/communities"

  # ============================================
  # CI/CD Rules
  # ============================================
  ci_config:
    id: "CI_CONFIG_RECOMMENDED"
    category: cicd
    description: "Automated testing and deployment"
    severity: info
    patterns:
      - .github/workflows/
      - .gitlab-ci.yml
      - .circleci/config.yml
      - .travis.yml
      - Jenkinsfile
    message: "No CI/CD configuration found"
    fix_hint: "psx fix --rule ci_config"
    doc_url: ""

  # ============================================
  # Quality Rules
  # ============================================
  pre_commit:
    id: "PRE_COMMIT_RECOMMENDED"
    category: quality
    description: "Run checks before committing"
    severity: info
    patterns:
      - .pre-commit-config.yaml
      - .husky/
      - .git/hooks/pre-commit
    message: "No pre-commit hooks found"
    fix_hint: "psx fix --rule pre_commit"
    doc_url: "https://pre-commit.com"

  editorconfig:
    id: "EDITORCONFIG_RECOMMENDED"
    category: quality
    description: "Consistent coding style across editors"
    severity: info
    patterns:
      - .editorconfig
    message: "No .editorconfig file found"
    fix_hint: "psx fix --rule editorconfig"
    doc_url: "https://editorconfig.org"

  code_owners:
    id: "CODE_OWNERS_RECOMMENDED"
    category: quality
    description: "Define code ownership for reviews"
    severity: info
    patterns:
      - CODEOWNERS
      - .github/CODEOWNERS
      - docs/CODEOWNERS
    message: "No CODEOWNERS file found"
    fix_hint: "psx fix --rule code_owners"
    doc_url: "https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners"

  # ============================================
  # DevOps Rules
  # ============================================
  dockerfile:
    id: "DOCKERFILE_RECOMMENDED"
    category: devops
    description: "Container images with Docker"
    severity: info
    patterns:
      - Dockerfile
      - docker/Dockerfile
    message: "No Dockerfile found"
    fix_hint: "psx fix --rule dockerfile"
    doc_url: "https://docs.docker.com/engine/reference/builder/"

  dockerignore:
    id: "DOCKERIGNORE_RECOMMENDED"
    category: devops
    description: "Optimize Docker builds with .dockerignore"
    severity: info
    patterns:
      - .dockerignore
    message: "No .dockerignore found"
    fix_hint: "psx fix --rule dockerignore"
    doc_url: "https://docs.docker.com/engine/reference/builder/#dockerignore-file"

  docker_compose:
    id: "DOCKER_COMPOSE_RECOMMENDED"
    category: devops
    description: "Multi-container Docker applications"
    severity: info
    patterns:
      - docker-compose.yml
      - docker-compose.yaml
      - compose.yml
      - compose.yaml
    message: "No docker-compose configuration found"
    fix_hint: "psx fix --rule docker_compose"
    doc_url: "https://docs.docker.com/compose/"